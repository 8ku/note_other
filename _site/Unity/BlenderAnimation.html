<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="stylesheet" href="/assets/css/syntax.css">
    
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>note_other | 书籍以外的各种笔记</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="note_other" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="书籍以外的各种笔记" />
<meta property="og:description" content="书籍以外的各种笔记" />
<link rel="canonical" href="http://localhost:4000/Unity/BlenderAnimation.html" />
<meta property="og:url" content="http://localhost:4000/Unity/BlenderAnimation.html" />
<meta property="og:site_name" content="note_other" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="note_other" />
<script type="application/ld+json">
{"url":"http://localhost:4000/Unity/BlenderAnimation.html","description":"书籍以外的各种笔记","headline":"note_other","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- 字体自适应放大 -->
    <link rel="stylesheet" href="/assets/css/style.css?v=159ef0d1a2b93c35559ace56016d4d2f8add2ad2">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- 显示页内目录 -->
    <!-- <script src="https://raw.githubusercontent.com/8ku/note_other/master/_js/jquery-3.5.1.min.js" type="text/javascript"></script> 
    <script src="https://raw.githubusercontent.com/8ku/note_other/master/_js/toc.js" type="text/javascript"></script> -->


	<!-- 显示数学公式 -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
    


    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">note_other</h1>
        <p class="header">书籍以外的各种笔记</p>


        <ul> 
               	
        	<li><a class="header name" href="https://8ku.github.io/note_other/Code/summary">Code</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/Unity/summary">Unity</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/math/summary">Math</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/RegularExpression/summary">RegularExpression</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/system/summary">System</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/WomensHistory/summary">WomensHistory</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/mythology/summary">Mythology</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/GameHistory/summary">GameHistory</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/Biology/summary">Biology</a></li>
        	<li><a class="header name" href="https://8ku.github.io/note_other/Draw/summary">Draw</a></li>

        </ul>

        <!--<ul>
          
          <li><a class="buttons github" href="https://github.com/8ku/note_other">View On GitHub</a></li>
        </ul> 

        
          <p class="header">This project is maintained by <a class="header name" href="https://github.com/8ku">8ku</a></p>
        

         -->
      </header>

      <div id="toc"></div>

      <section>

        <head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
      <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
      <script>mermaid.initialize({startOnLoad:true});</script>
</head>
<h1 id="blender-node">Blender Node</h1>

<ul id="markdown-toc">
  <li><a href="#blender-node" id="markdown-toc-blender-node">Blender Node</a>    <ul>
      <li><a href="#工作流程" id="markdown-toc-工作流程">工作流程</a>        <ul>
          <li><a href="#blender-中的k帧流程" id="markdown-toc-blender-中的k帧流程">Blender 中的k帧流程</a></li>
          <li><a href="#创建多个动画" id="markdown-toc-创建多个动画">创建多个动画</a></li>
        </ul>
      </li>
      <li><a href="#k帧快捷键" id="markdown-toc-k帧快捷键">K帧快捷键</a></li>
      <li><a href="#基本动作时长" id="markdown-toc-基本动作时长">基本动作时长</a></li>
      <li><a href="#坑" id="markdown-toc-坑">坑</a>        <ul>
          <li><a href="#移动torso不能下蹲" id="markdown-toc-移动torso不能下蹲">移动Torso不能下蹲</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h2 id="工作流程">工作流程</h2>

<h3 id="blender-中的k帧流程">Blender 中的k帧流程</h3>

<ul>
  <li>分屏到 Dope Sheet , 模式选择 Action Editor</li>
  <li>新建一个动作, 命名, 保存</li>
  <li>在Pose模式下摆第一帧姿势(使用动画参考图 : 新建一个图像空对象, 载入参考图)</li>
  <li>摆好姿势后, 全选骨骼, i-Rotation and Location(<strong>最好全程只用IK或FK一种方式k帧, 不然动作会乱</strong>)</li>
  <li>把时间轴里的Keying-Active Keyting Set 更改为 Rotation and Location(方便观察)</li>
  <li>全选所有关键帧, cmd+c, 移到13帧(教程参考, 整个行走动画一共13帧), shift+cmd+v 粘贴翻转动作</li>
  <li>移到第7帧(中间帧), 摆好中间动作, 再 4,10 微调中间动作</li>
  <li>a 全选所有帧(**把光标放到Summary上 a 全部, 记得在两个地方按 a **), cmd+c全选</li>
  <li>放到最后一帧, shift+cmd+v</li>
  <li>导出fbx, 勾选 Apply transform, 勾选 Bake Animation</li>
  <li>导入Unity, 把Model Rig Animation分开导
    <ul>
      <li>Model: 去掉 Import Cameras Import Lights , apply</li>
      <li>Rig: animation type 选择 generic , apply
        <ul>
          <li>如果要使用Avatar(如果需要在Unity里调整骨骼动画需要使用这个)
            <ul>
              <li><a href="https://github.com/AlexLemminG/Rigify-To-Unity">安装插件 RigifyToUnity</a></li>
              <li>在Blender-中选择<code class="language-plaintext highlighter-rouge">rig</code>图层, 在 跳舞小人-Rigify to Unity converter , 点击<code class="language-plaintext highlighter-rouge">Prepare rig for Unity</code></li>
              <li>选择模型和rig, 导出fbx(导出到Unity的Assets中的话Unity会自动读取)</li>
              <li>Transform - Apply Scallings - FBX Units Scale</li>
              <li>勾选  Armature - Only Deform Bones</li>
              <li>进入Unity, Rig - Animation Type 选择 Humanoid</li>
              <li>即可使用Avatar</li>
            </ul>
          </li>
          <li>在Unity中新建一个Animator Controller, 打开
            <ul>
              <li>把动画片段直接拖入Animator窗口</li>
            </ul>
          </li>
          <li>选中导入的对象, 把上一步的Animator Controller拖入 Animator - Controller</li>
        </ul>
      </li>
      <li>Animation: 勾选 loop time 和 loop pose, apply
        <ul>
          <li>如果有多个动画, 需要一个个勾选 loop time, apply</li>
          <li><a href="https://www.youtube.com/watch?v=vrN9duEoA6g">可以使用这个脚本自动处理</a>
            <ul>
              <li>加载后, 菜单栏多一个菜单 Imphenzia , 点击下拉把菜单放到屏幕上</li>
              <li>点击导入的物体包, BulkAnimClipSettings菜单会自动寻找动画片段并显示出来</li>
              <li>选择所有的Clip Name , Change Animation Settings</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="创建多个动画">创建多个动画</h3>

<ul>
  <li>Dope Sheet - 切换到 Action Editor</li>
  <li>右侧 新建动作</li>
  <li>全选所有关键帧和Summary里的标签 x 清空</li>
  <li>pose mode 把人物动作复原</li>
</ul>

<h2 id="k帧快捷键">K帧快捷键</h2>

<ul>
  <li>插入帧: i</li>
  <li>批量删除帧: 全选帧, 在顶部 summary 行的光标帧, cmd+ left click 会取消选择当前列之前的所有列, 再x</li>
  <li>缩放关键帧: 全选 s</li>
  <li>重置动作: alt+g alt+r</li>
  <li><strong>打开动作面板的<code class="language-plaintext highlighter-rouge">Only Show Selected</code>, 对编辑单部分动作比较方便</strong> 在动作名称后面, 图标为🡼</li>
  <li>Graph Editor
    <ul>
      <li><strong>放大视图: 按住ctrl 和中键, 上下滑动</strong></li>
      <li>选中当前帧所在链: shift+LB</li>
      <li>选中当前帧所在链所有key: L</li>
      <li>在Graph Editor和Dope Sheet切换: ctrl+tab</li>
      <li>选中当前帧所在列: K</li>
      <li>选中当前帧以前/以后所有帧: [ /  ]</li>
      <li>反选: cmd+i</li>
      <li>插入帧: cmd+RB</li>
      <li>独显当前选中帧所在曲线: Shift+h / alt+h</li>
      <li>独显时, i 插入帧可选择插入到显示帧还是所有帧</li>
      <li>展开/收起层级: NumPad + -</li>
      <li><strong>T/V: 快速改变曲线形式</strong></li>
      <li>自由框选: cmd/ctrl+RB</li>
      <li>根据Cursor的位置缩放: N 调出菜单, 勾选 Show Cursor, 调整X and Y
        <ul>
          <li>快速把Cursor定位到选中帧: ctrl/cmd+g</li>
        </ul>
      </li>
      <li>同时缩放/移动一个帧的两个handle: S / G - X / Y</li>
      <li>平滑曲线: 选中一段曲线(需要有起点和终点), alt+o(不断按o)    <a href="https://github.com/aresdevo/animaide">需要安装插件</a></li>
      <li>Snap Menu: shift+s</li>
      <li>复制/粘贴keyframe: ctrl+c  - 切换到粘贴的层 ctrl+v 选择粘贴形式</li>
      <li>镜像keyframe: ctrl+m</li>
    </ul>
  </li>
</ul>

<h2 id="基本动作时长">基本动作时长</h2>

<p><strong>动画最后一帧应该和第一帧一样, 所以clip的长度应该为 1~(last - 1)</strong></p>

<table>
  <thead>
    <tr>
      <th>Move Name</th>
      <th>Frames</th>
      <th>Demo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Idle</td>
      <td>30~40</td>
      <td> </td>
    </tr>
    <tr>
      <td>Run</td>
      <td>18 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Walk</td>
      <td>24 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Sneak</td>
      <td>24 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>React</td>
      <td>15 or fewer</td>
      <td>发觉</td>
    </tr>
    <tr>
      <td>Death</td>
      <td>15 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Knock down</td>
      <td>12 or fewer</td>
      <td>被打中</td>
    </tr>
    <tr>
      <td>Get up</td>
      <td>30 or fewer</td>
      <td>从地上起来</td>
    </tr>
    <tr>
      <td>Attack-Aim</td>
      <td>10 or fewer</td>
      <td>攻击别人</td>
    </tr>
    <tr>
      <td>Attack-Shoot</td>
      <td>14 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Attack-Bite</td>
      <td>14 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Attack-Punch</td>
      <td>14 or fewer</td>
      <td> </td>
    </tr>
    <tr>
      <td>Attack-Kick</td>
      <td>14 or fewer</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="坑">坑</h2>

<h3 id="移动torso不能下蹲">移动Torso不能下蹲</h3>

<p>检查两边Foot的 <code class="language-plaintext highlighter-rouge">IK-FK</code>是不是1, 需要调整到0</p>


      </section>


      <!-- <script type="text/javascript">
        $(document).ready(function() {
        $('#toc').toc();
        });
      </script> -->



      <footer>
      <p><small>BackTo <a href="https://8ku.github.io/note_other">Home</a>  |  To<a href="javascript:scroll(0,0)"> TOP</a></small></p>
      <!--  <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p> -->
      </footer>
    </div>



    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    

  </body>
</html>
