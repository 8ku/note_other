# C#

## 基本常识

基本格式：

~~~c#
using System; //space type

namespace simple //sign space name

{
    class Program //name a class
    {
        static void Main()  //name a function call main
        {
            Console.WriteLine("Hi,there.");
        }
    }
}
~~~

- 每个C#程序必须有一个类带有Main方法。

- 语句以分号结束

  - **块**

    - 块由成对大括号包围的0条或多条语句序列，在语法上相当于一条语句
    - 语法上只需要一条语句，如果需要执行的动作无法用一条简单的语句表达时，考虑用块
    - 有些特定程序结构只能使用块，不能用简单语句替代块
    - <u>块后不跟分号</u>

  - **Console**

    - Write方法：把一个文本字符串发送到控制台窗口(可以有1个以上的参数，参数用逗号分隔，**第一个参数必须总是字符串**——称为格式字符串，格式字符串可以包含替代标记)

    - WriteLine方法：和Write一样，但会在每个输出字符串后添加一个换行符(可以有1个以上的参数，参数用逗号分隔，第一个参数必须总是字符串——格式字符串，格式字符串可以包含替代标记)

    - ~~~c#
      Console.WriteLine("Two sample integers are {0} and {1}.",3,6);
      > Two sample integers are 3 and 6.
      ~~~

    - 标记不能试图引用超出替换值列表长度以外位置的值。如果引用了，不会编译错误，但会运行错误

    - **对齐说明符**：{0，10} 表示对齐，正数表示右对齐，负数表示左对齐，整数表示字段使用字符的最少数量，0为索引值，表示列表中的第0项，10表示在10个字符的字段中右对齐，如果值超过10，会报错

    - ~~~c#
      Console.WriteLine("{1,10}",500,600);
      >       600 //从第10个字符开始往左显示值，即600前面有7个空格
      ~~~

    - **格式字段**：指定数字应该以哪种形式表示，应该被当做货币、十进制数字、十六进制数字还是定点符号

      - 格式字段有三部分：

        - 冒号后必须跟着格式说明符，中间不能有空格

        - 格式说明符是一个字符，支持大小写

        - 精度说明符可选，由1~2位数字组成，它的实际意义取决于格式说明符

        - ~~~c#
          Console.WriteLine("{0:F4}",12.345678); 
          /* 
          0:索引
          F:格式说明符
          4：4位小数的定点数
          */
          > 12.3457
          ~~~

        - 标准数字格式说明符

          - | 名字和字符               | 意义                                                         |
            | ------------------------ | ------------------------------------------------------------ |
            | 货币 C,c                 | 货币符号，货币符号取决于程序所在PC的区域设置<br />精度说明符：小数位数<br />eg:Console.WriteLine("{0:C}”,12.5);<br />输出：$12.5 |
            | 十进制数 D,d             | 十进制数字字符串，可以有负数，只能和整数类型配合<br />精度说明符：输出字符串中的最少位数。如果实际数字的位数更少，则在左边以0填充 |
            | 定点F,f                  | 带有小数点的十进制数字字符串，可以有负数<br />精度说明符：小数的位数<br />eg:Console.WriteLine("{0:F4}”,12.34356789);<br />输出：12.3457 |
            | 常规G,g                  | 在没有指定说明符的情况下，会根据值转换为定点或科学记数法表示的紧凑形式<br />精度说明符：根据值<br />eg:Console.WriteLine("{0,G4}”,12.345678);<br />输出：12.35 |
            | 十六进制数X,x,区分大小写 | 十六进制数数字的字符串。十六进制数字A~F会匹配说明符的大小写形式。<br />精度说明符：输出字符串中的最少位数。如果实际的位数更少，则在左边以0填充<br />eg:Console.WriteLine("{0:x}”,180026);<br />输出：2bf3a |
            | 数字N,n                  | 和定点表示法相似，但在每三个数字的一组中间有逗号或空格分隔符。从小数点开始往左数。使用逗号还是空格分隔符取决于程序所在的PC的区域设置<br />精度说明符：小数的位数<br />eg:Console.WriteLine("{0:N2}",12345678.54321);<br />输出：12，345，678.54 |
            | 百分比P,p                | 表示百分比的字符串。数字会乘以100<br />精度说明符：小数的位数<br />eg:Console.WriteLine("{0:P2}",0.1221897);<br />输出：12.22% |
            | 往返过程R,r              | 保证输出字符串后如果使用Parse方法将字符串转化成数字，那么该值和原始值一样。<br />精度说明符：忽略<br />eg:Console.WriteLine("{0:e4}”,1234.21897);<br />输出：1234.21897 |
            | 科学记数法E,e,区分大小写 | 具有尾数和指数的科学记数法。指数前面加字母E。E的大小写和说明符一致<br />精度说明符：小数的位数<br />eg:Console.WriteLine("{0:e4}”,12.3456789);<br />输出：1.2346e+001 |
          
          

- 注释不可以嵌套

  - | 类型           | 开始结束  | 描述                                       |
    | -------------- | --------- | ------------------------------------------ |
    | 单行注释       | //        | 从开始标记到该行行尾的文本被编译器忽略     |
    | 带分隔符的注释 | /*     */ | 从开始标记到结束标记之间的文本被编译器忽略 |
    | 文档注释       | ///       | 注释文档                                   |

    

## 类型

C#程序是一组类型声明。

### 类型

类型是一种用来创建数据结构的模板。模板本身不是数据结构。

类型包含数据成员和函数成员。

类型的元素：

- 名称
- 数据结构
- 行为和约束条件

### 预定义类型

13种简单类型和3种非简单类型。

所有预定义类型名称都是小写。

| 简单类型          | 名称                           | 说明             | 默认值 |
| ----------------- | ------------------------------ | ---------------- | ------ |
| 非数值类型        | bool                           | 布尔，true false | false  |
| 非数值类型        | char                           | Unicode字符串    | \x0000 |
| 数值类型-整数类型 | 8-Bit:<br />sbyte<br />byte    |                  | 0      |
| 数值类型-整数类型 | 16-Bit:<br />short<br />ushort |                  | 0      |
| 数值类型-整数类型 | 32-Bit:<br />int<br />uint     |                  |        |
| 数值类型-整数类型 | 64-Bit:<br />long<br />ulong   |                  | 0      |
| 数值类型-浮点类型 | decimal                        | 小数，精度为28位 | 0m     |
| 数值类型-浮点类型 | float                          | 单精度浮点数     | 0.0f   |
| 数值类型-浮点类型 | double                         | 双精度浮点数     | 0.0d   |

| 非简单类型 | 说明                             |
| ---------- | -------------------------------- |
| object     | 所有其他类型的基类，包括简单类型 |
| string     | 0个或多个Unicode字符组成的序列   |
| dyamic     | 在使用动态语言编写的程序集时使用 |

### 用户定义类型

- 类类型：class
- 结构类型：struct
- 数组类型：array
- 枚举类型：enum
- 委托类型：delegate
- 接口类型：interface

### 栈和堆

程序运行时，它的数据必须存储在内存中。运行中的程序使用两个内存区域来存储数据：栈和堆。

- **栈**
  - 栈存储的数据类型：
    - 某些类型变量的值
    - 程序当前的执行环境
    - 传递给方法的参数
- **堆**
  - 堆的内存能够以任意顺序存入和移除。

## 变量

### 变量种类：4种变量

| 变量名称 | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 本地变量 | 临时保存数据                                                 |
| 字段     | 保存和类型或类型实例相关的数据                               |
| 参数     | 用于从一个方法到另一个方法传递数据的临时变量                 |
| 数组元素 | 同类数据构成的有序集合的一个成员，可以为本地变量，也可以为类型的成员 |

### 变量声明

变量使用前必须声明，一个声明至少需要一个类型和一个名称，声明完成两件事：

1. 给变量命名，并为它关联一种类型
2. 让编译器为它分配一块内存

### 多变量声明

可以把多个变量声明在一条单独的声明语句中：

1. 多变量声明中的变量必须类型相同
2. 变量名必须用逗号分隔，可以在变量名后包含初始化语句

```c#
int var3=7,var4,var5=3;
double var6,var7=6.52;
```

## 静态类型和dynamic关键字

### 静态类型

在编译时确定且不能在运行时修改的，叫静态类型。

### 动态类型

变量的类型直到运行时才会被解析，dynamic代表一个特定的、实际的C#类型。

编译时，编译器不会对dynamic类型的变量进行类型检查，但运行时会检查。

## 类

### 概念

运行中的程序是一组相互作用的对象的集合。

类是一种能存储数据并执行代码的数据结构，包含：

1. 数据成员：存储与类或类的实例相关的数据，数据成员通常模拟该类所表示的现实世界事物的特性
2. 函数成员：执行，模拟类所表示的现实世界事物的功能和操作

| 数据成员-存储数据 | 函数成员-执行代码 |
| ----------------- | ----------------- |
| 字段              | 方法              |
| 常量              | 属性              |
|                   | 构造函数          |
|                   | 析构函数          |
|                   | 运算符            |
|                   | 索引器            |
|                   | 事件              |

### 声明类

类的声明定义新类的特征和成员。类的声明包括：

- 类的名称
- 类的成员
- 类的特征

```c#
class MyExcellentClass //类声明
{
	成员声明
}
```

### 类成员

- **字段（数据成员）**

  - 它可以是任何类型

  - 可以被写入、读取

  - ```c#
    int Identifier;  //int:类型  Identifier:字段名
    ```

  - 字段初始化值必须是编译时可确定的，如果没有初始化语句，字段的值会被编译器设为默认值，由字段类型决定默认值。

- **方法（函数成员）**

  - 是具有名称的可执行代码块。

  - 方法的组成：

    - 返回类型，如果一个方法不返回值，返回类型被指定为void
    - 名称：方法的名称
    - 参数列表：至少由一对空的圆括号组成，如果有参数，将被列在圆括号中间
    - 方法体：由一对大括号组成，大括号内包含执行代码

  - ```c#
    class SimpleClass
    {
        void PrintNums()
        {
            Console.WriteLine("1");
            Console.WriteLine("2");
        }
    }
    ```

  - C#没有全局函数声明在类型声明的外部。

### 访问修饰符

访问修饰符是成员声明的可选部分，指明程序的其他部分如何访问成员。访问修饰符放在简单声明形式之前。

5种成员访问控制：

- 私有的（private）
  - 私有成员只能从声明它的类的内部访问，其他的类不能看见或访问它们
- 公有的（public）
- 受保护的（protected）
- 内部的（internal）
- 受保护内部的（protected internal）

## 方法

方法是一块具有名称的代码，可以使用方法的名称从别的地方执行代码，也可以把数据传入方法并接收数据输出。

方法的组成部分：

- 方法头：指定方法的特征
	- 方法是否返回参数，如返回，返回什么类型
	- 方法的名称
	- 哪种类型的数据可以传递给方法或从方法返回，以及应如何处理这些数据
- 方法体：包含可执行的语句序列

```
Int MyMethod ( int part1, string part2 )   \\\方法头  int:返回类型。MyMethod：方法名称   （int ）：参数列表
{                       \\\方法体
	语句1
	语句2
}
```

### 方法体

方法体是一个块，是大括号括起来的语句序列，块可以包含以下项目：

- 本地变量
- 控制流结构
- 方法调用
- 内嵌的块

### 本地变量

本地变量的存在性和生存期仅限于创建他的块和内嵌的块。

- 从声明它的那一点开始存在
- 在块完成执行时结束存在

### var 关键字

var 关键字表示任何可以初始化语句的类型，不是特定类型变量的符号。

- 只能用于本地变量，不能用于字段
- 只能在变量声明中包含初始化时使用
- 一旦编译器推断出变量类型，他就是固定且不能更改的

### 本地常量

本地常量一旦被初始化，值就不能改变了，本地常量必须声明在块的内部。

- 常量在声明时必须初始化
- 常量在声明后不能改变

### 控制流

控制流是程序从头到尾的执行流程。

- 选择语句：可以选择哪条语句或语句块来执行
	- if 
	- if...else
	- switch
- 迭代语句：在一个语句块上循环或迭代
	- for 
	- while
	- Do
	- Foreach
- 跳转语句：从代码块或方法体内部的一个地方跳转到另一个地方
	- break 跳出当前循环
	- continue 到当前循环的底部
	- return 返回调用方法继续执行

